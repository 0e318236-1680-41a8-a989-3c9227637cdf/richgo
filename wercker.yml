build:
  box: kyoh86/goveralls
  steps:
    - setup-go-workspace:
      package-dir: github.com/${WERCKER_APPLICATION_OWNER_NAME}/${WERCKER_APPLICATION_NAME}

    - script:
        name: coverage
        code: |
          GIT_BRANCH=$WERCKER_GIT_BRANCH goveralls -race -package ./... -repotoken ${COVERALLS_TOKEN}

  after-steps:
    - slack-notifier:
        url: $SLACK_URL
        channel: tests
